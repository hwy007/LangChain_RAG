# RAG本地知识库问答引擎 - 快速开始

## 🚀 快速启动

### 1. 启动后端服务

确保后端服务已启动在 `http://localhost:8002`

```bash
# 在后端项目目录
cd backend
python -m uvicorn app.main:app --reload --port 8002
```

### 2. 启动前端应用

```bash
# 在前端项目目录
npm install  # 如果还未安装依赖
npm run dev  # 启动开发服务器
```

### 3. 检查连接状态

打开浏览器访问前端应用，打开开发者工具（F12）查看控制台：

✅ 正常情况：
```
📋 当前API配置:
  - 基础URL: http://localhost:8002/api
  ...
✅ 后端服务连接正常
```

❌ 连接失败：
```
❌ 无法连接到后端服务
💡 请确保后端服务已启动在: http://localhost:8002/api
```

## 📝 使用流程

### Step 1: 准备文档

准备一个或多个 `.md` 格式的Markdown文档。例如：

**test_document.md**
```markdown
# 公司员工手册

## 考勤制度

### 病假规定
员工每年享有5天带薪病假...

### 年假规定
员工工作满一年后享有年假...
```

### Step 2: 上传文档并创建知识库

1. 点击右侧面板的 **"开始上传文档"** 按钮
2. 选择准备好的 `.md` 文件
3. 点击 **"下一步"**，等待文件上传完成
4. 配置知识库参数（可使用默认值）：
   - 向量数据库名称：如 `test_document_知识库`
   - 分段最大长度：2048 tokens
   - 重叠最大长度：100 tokens
   - Top-K：3
5. 点击 **"保存"**，等待知识库创建完成
6. 查看成功提示和片段总数

### Step 3: 测试召回功能（可选）

在右侧 **"召回测试"** 区域：

1. 输入测试查询，例如：`病假有几天？`
2. 点击搜索按钮或按回车
3. 查看返回的相关文档片段
4. 点击片段可查看完整内容

### Step 4: 开始对话

在左侧聊天区域：

1. 输入问题，例如：`公司的病假政策是什么？`
2. 按回车发送
3. 查看AI基于知识库的回答
4. 查看回答下方的引用文档片段（如果有）

## 🎨 界面说明

### 顶部栏
- **左侧**：显示课程信息
- **中间**：应用标题
- **右侧**："领取课件"按钮（弹出二维码）

### 左侧区域（2/3宽度）- 聊天对话
- 消息列表显示区域
- 底部输入框和发送按钮
- "清空对话"按钮

### 右侧区域（1/3宽度）- 知识库管理

**未创建知识库时：**
- 显示上传引导
- "开始上传文档"按钮

**已创建知识库时：**
- 知识库信息（名称、参数、片段数）
- 召回测试输入框
- 召回结果列表
- 删除知识库按钮

## 🔍 功能特性

### 1. 文档上传
- ✅ 支持 `.md` 格式
- ✅ 自动提取文本
- ✅ 显示文件大小

### 2. 知识库创建
- ✅ 可配置分段参数
- ✅ 显示创建进度
- ✅ 显示片段总数

### 3. 召回测试
- ✅ 实时检索测试
- ✅ 显示相关性分数
- ✅ 片段预览（前100字符）
- ✅ 点击查看完整内容

### 4. AI对话
- ✅ 基于知识库的问答
- ✅ 显示引用来源
- ✅ 片段预览（前20字符）
- ✅ 清空对话历史

### 5. 知识库管理
- ✅ 查看知识库信息
- ✅ 删除知识库
- ✅ 重新创建知识库

## 🎯 使用场景示例

### 场景1：企业知识库问答

1. 上传企业文档（员工手册、规章制度等）
2. 创建知识库
3. 员工可以通过对话快速查询政策信息
4. 查看AI回答和引用来源

### 场景2：技术文档助手

1. 上传技术文档（API文档、开发指南等）
2. 创建知识库
3. 开发者可以快速查询技术细节
4. 获得准确的引用和说明

### 场景3：学习资料问答

1. 上传学习笔记、教材等
2. 创建知识库
3. 通过问答方式复习知识点
4. 查看相关段落和内容

## ⚠️ 注意事项

1. **文件格式**：仅支持 `.md` 格式
2. **文件大小**：建议不超过10MB
3. **知识库限制**：当前仅支持单个知识库（删除旧的才能创建新的）
4. **对话历史**：清空对话仅清除前端显示，不影响知识库
5. **网络要求**：需要后端服务连接正常

## 🐛 常见问题

### Q1: 点击"开始上传文档"没反应？
- 检查控制台是否有错误
- 确认后端服务是否启动

### Q2: 上传文件失败？
- 确认文件格式是否为 `.md`
- 检查文件大小是否超限
- 查看控制台错误信息

### Q3: 知识库创建失败？
- 检查网络连接
- 查看后端日志
- 确认文件上传是否成功

### Q4: 召回测试没有结果？
- 确认知识库已创建
- 尝试不同的查询语句
- 检查文档内容是否相关

### Q5: AI对话没有引用片段？
- 这是正常的，AI可能判断不需要检索
- 或者知识库中没有相关内容
- 尝试调整查询方式

## 📞 获取帮助

- 查看 `/API_TEST_GUIDE.md` 了解详细测试方法
- 查看 `/BACKEND_INTEGRATION_SUMMARY.md` 了解技术细节
- 检查浏览器控制台的错误信息
- 查看后端服务日志

## 🎉 开始使用

现在你已经了解了基本使用方法，开始创建你的第一个知识库吧！
